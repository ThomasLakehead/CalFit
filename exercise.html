<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- Title -->
    <title>üí™ Exercise Tracker</title>
     <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Dark theme styling -->
    <style>
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar, .btn-primary, .form-control, .form-select, .table {
            background-color: #1e1e1e !important;
            color: #e0e0e0 !important;
            border-color: #333 !important;
        }
        .navbar-brand, .nav-link {
            color: #ffffff !important;
        }
        .nav-link:hover, .btn:hover {
            box-shadow: 0px 4px 12px rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-style {
            background-color: #1c1c1c;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 0 10px rgba(0,0,0,0.4);
            margin-bottom: 2rem;
        }
        button {
            transition: all 0.3s ease;
        }
        .table thead {
            background-color: #2c2c2c;
            color: #ffffff;
        }
        .table tbody tr {
            transition: background-color 0.2s ease;
        }
        .table tbody tr:hover {
            background-color: #2a2a2a;
        }
        .table td, .table th {
            vertical-align: middle;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: #1a1a1a;
        }
        #workoutContainer h3 {
            margin-top: 2rem;
            color: #e2e2e2;
            text-align: center;
        }
        #workoutContainer table {
            background-color: #1e1e1e;
            border: 1px solid #333;
        }
        #workoutContainer th {
            background-color: #2c2c2c;
            color: #fdfdfd;
        }
        #workoutContainer td {
            color: #000000;
        }
        
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">üè† Home</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="exercise.html">üí™ Exercise</a></li>
                    <li class="nav-item"><a class="nav-link" href="calorie.html">üçé Calories</a></li>
                    <li class="nav-item"><a class="nav-link" href="timer.html">‚è± Timer</a></li>
                    <li class="nav-item"><a class="nav-link" href="progress.html">üìà Progress</a></li>
                </ul>
            </div>
        </div>
    </nav>
<!-- Useful workout links -->
    <div class="container mt-5 card-style fade-in">
        <h2 class="text-center">üìö Useful Links for Workouts</h2>
        <div class="row justify-content-center">
            <div class="col-12 col-md-8">
                <ul class="list-group">
                    <li class="list-group-item">
                        <a href="https://www.muscleandstrength.com/exercises" target="_blank">üí° Muscle & Strength - Every Exercise</a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.muscleandstrength.com/workout-routines" target="_blank">üìã Workout Routines - Beginner and Advanced</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
<!-- Create a workout form -->
    <div class="container mt-5 card-style fade-in">
        <h2 class="text-center">üìù Create Your Workout</h2>
        <form id="workout-form">
            <div class="mb-3 input-group">
                <span class="input-group-text">üèãÔ∏è‚Äç‚ôÇÔ∏è</span>
                <input type="text" id="workoutName" class="form-control" placeholder="Workout name e.g. Bench Press" autofocus>
            </div>
            <div class="mb-3">
                <label for="exerciseType" class="form-label">Type</label>
                <select id="exerciseType" class="form-select">
                    <option value="endurance">Endurance</option>
                    <option value="strength">Strength</option>
                    <option value="balance">Balance</option>
                    <option value="flexibility">Flexibility</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="mb-3 row">
                <div class="col">
                    <label for="hours" class="form-label">Hours</label>
                    <input type="number" id="hours" class="form-control" placeholder="0" min="0">
                </div>
                <div class="col">
                    <label for="minutes" class="form-label">Minutes</label>
                    <input type="number" id="minutes" class="form-control" placeholder="30" min="0">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col">
                    <label for="sets" class="form-label">Sets</label>
                    <input type="number" id="sets" class="form-control" placeholder="e.g. 3">
                </div>
                <div class="col">
                    <label for="reps" class="form-label">Reps</label>
                    <input type="number" id="reps" class="form-control" placeholder="e.g. 12">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col">
                    <label for="weight" class="form-label">Weight</label>
                    <input type="number" id="weight" class="form-control" placeholder="e.g. 20">
                </div>
                <div class="col">
                    <label for="weightUnit" class="form-label">Unit</label>
                    <select id="weightUnit" class="form-select">
                        <option value="kg">kg</option>
                        <option value="lbs">lbs</option>
                    </select>
                </div>
            </div>
            <div class="mb-3">
                <label for="workoutDay" class="form-label">Day</label>
                <select id="workoutDay" class="form-select">
                    <option value="day1">Day 1</option>
                    <option value="day2">Day 2</option>
                    <option value="day3">Day 3</option>
                    <option value="day4">Day 4</option>
                    <option value="day5">Day 5</option>
                    <option value="day6">Day 6</option>
                    <option value="day7">Day 7</option>
                </select>
            </div>
            <button type="button" class="btn btn-primary w-100" onclick="logWorkout()">üíæ Log Workout</button>
        </form>
    </div>

   
    <div id="workoutContainer" class="container mt-5 fade-in"></div>
 <!-- Table of all logged workouts (Not working) -->
    <div class="container mt-5 card-style fade-in">
        <h3 class="text-center">üìå Logged Workouts</h3>
        <table class="table table-striped table-bordered table-dark text-center rounded shadow-sm">
            <thead>
                <tr>
                    <th>Workout</th>
                    <th>Exercise Type</th>
                    <th>Duration</th>
                    <th>Weight</th>
                    <th>Day</th>
                    <th>Sets</th>
                    <th>Reps</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="workoutLogTable">
    
            </tbody>
        </table>
    </div>

    <div class="mb-3">
        <label for="exportDay" class="form-label text-white">üìÖ Select Day to Export</label>
        <select id="exportDay" class="form-select bg-dark text-white border-secondary">
            <option value="all">All Days</option>
            <option value="day1">Day 1</option>
            <option value="day2">Day 2</option>
            <option value="day3">Day 3</option>
            <option value="day4">Day 4</option>
            <option value="day5">Day 5</option>
            <option value="day6">Day 6</option>
            <option value="day7">Day 7</option>
        </select>
    </div>
    

    <script src="exercise.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <div class="container mt-4 text-center fade-in card-style">
        <h2>üì¶ Export Workouts</h2>
        <button type="button" class="btn btn-success me-2" onclick="exportWorkoutData('csv')">üìÑ Export CSV</button>
        <button type="button" class="btn btn-warning" onclick="exportWorkoutData('json')">üíæ Export JSON</button>
    </div>
    
   
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="liveToast" class="toast align-items-center text-bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body" id="toastMessage"></div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
    <!-- Toast and Export Function -->
    <script>
        function showToast(message) {
            document.getElementById('toastMessage').innerText = message;
            const toastEl = new bootstrap.Toast(document.getElementById('liveToast'));
            toastEl.show();
        }
        function exportWorkoutData(type) {
    const selectedDay = document.getElementById('exportDay').value;
    const allLogs = [];

    const daysToExport = selectedDay === 'all'
        ? ['day1', 'day2', 'day3', 'day4', 'day5', 'day6', 'day7']
        : [selectedDay];

    daysToExport.forEach(dayKey => {
        const workouts = workoutLogsByDay[dayKey];
        const dayNum = dayKey.replace("day", "");

        workouts.forEach(workout => {
            const hours = Math.floor(workout.duration / 60);
            const minutes = workout.duration % 60;
            allLogs.push({
                Day: `Day ${dayNum}`,
                Workout: workout.workoutName,
                Type: workout.exerciseType,
                Duration: `${hours}h ${minutes}m`,
                Weight: `${workout.weight} ${workout.weightUnit}`,
                Sets: workout.sets,
                Reps: workout.reps
            });
        });
    });

    if (allLogs.length === 0) {
        showToast('No workout logs to export.');
        return;
    }

    let output, mime, ext;

    if (type === 'csv') {
        const headers = Object.keys(allLogs[0]);
        const rows = allLogs.map(entry => headers.map(h => `"${entry[h]}"`).join(','));
        output = [headers.join(','), ...rows].join('\n');
        mime = 'text/csv';
        ext = 'csv';
    } else {
        output = JSON.stringify(allLogs, null, 2);
        mime = 'application/json';
        ext = 'json';
    }

    const blob = new Blob([output], { type: mime });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `workout_logs_${selectedDay}.${ext}`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    const exportLabel = selectedDay === 'all' ? 'all workouts' : `Day ${selectedDay.replace('day', '')}`;
    showToast(`üì§ Exported ${exportLabel} as ${ext.toUpperCase()}`);
}
 </script>    
</body>
</html>
